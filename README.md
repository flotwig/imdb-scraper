imdb-scraper
==========

This is an API which scrapes the [Internet Movie Database](http://www.imdb.com) for movie and TV show information. It supports both searching for movies and retrieving movies by ID. There is also a caching layer implemented in Redis.

## Using the API

The API has a public endpoint at https://imdb-scraper.herokuapp.com/ where the following functions can be found. You can also run your own instance if you wish.

### search - search IMDb titles

#### Request

```
GET /search?q=Game+of+Thrones&limit=20
```

* ```q``` - *Required.* The string to query IMDb with.
* ```limit``` - Optional. Maximum number of results to return. Defaults to 5.

#### Response

```
{
    "success": true,
    "result": [{
        "title": "Game of Thrones",
        "plot": "Nine noble families fight for control over the mythical lands of Westeros, while a forgotten race returns after being dormant for thousands of years.",
        "runtime": "56min",
        "rating": "9.5",
        "votes": "1,175,967",
        "genres": ["Adventure", "Drama", "Fantasy", "Romance"],
        "photoUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BMjE3NTQ1NDg1Ml5BMl5BanBnXkFtZTgwNzY2NDA0MjI@._V1_UX182_CR0,0,182,268_AL_.jpg",
        "retrieved": "2017-07-16T20:21:30.296Z"
    }, {
        "title": "Game of Thrones",
        "year": "2012",
        "plot": "Enter the gritty and medieval fantasy world of Westeros as players will forge alliances and wage battles as they play a pivotal role in the ongoing war for power of the Seven Kingdoms.",
        "runtime": "",
        "rating": "8.1",
        "votes": "1,230",
        "genres": ["Action", "Adventure", "Fantasy", "Thriller"],
        "photoUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BMjE5NTk5NDg3OV5BMl5BanBnXkFtZTgwNDExNzg2MDE@._V1_UY268_CR4,0,182,268_AL_.jpg",
        "retrieved": "2017-07-16T20:21:29.305Z"
    }, {
        "title": "Game of Thrones",
        "plot": "Join the co-creators of Game of Thrones, the hit HBO series based on the books by George R. R. Martin.",
        "runtime": "23min",
        "rating": "7.3",
        "votes": "20",
        "genres": ["Talk-Show"],
        "photoUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BMTc4NzYxNDg5M15BMl5BanBnXkFtZTgwMTM3NTEzMjE@._V1_UY268_CR87,0,182,268_AL_.jpg",
        "retrieved": "2017-07-16T20:21:29.148Z"
    }, {
        "title": "Game of Thrones: Season 2 - Character Profiles",
        "year": "2013",
        "plot": "Get to know the major power players in Season 2 of 'Game of Thrones' with these seven profiles, including Renly and Stannis Baratheon, Robb Stark, Theon Greyjoy and more.",
        "runtime": "16min",
        "rating": "8.9",
        "votes": "916",
        "genres": ["Documentary", "Short"],
        "photoUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BMTU1MzU2MDE4MV5BMl5BanBnXkFtZTgwNTc3NzA2MDE@._V1_UY268_CR87,0,182,268_AL_.jpg",
        "retrieved": "2017-07-16T20:21:29.527Z"
    }, {
        "title": "Game of Thrones: A Telltale Games Series",
        "year": "2014",
        "plot": "During the War of the Five Kings, House Forrester finds themselves embroiled in a web of deceit and corruption.",
        "runtime": "",
        "rating": "8.8",
        "votes": "2,115",
        "genres": ["Adventure", "Drama", "Fantasy"],
        "photoUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BYmY5ZjFkOTMtMWYxYy00ZjllLTg5MWMtYTA0OTU3YTNkNmExXkEyXkFqcGdeQXVyMjA1MTA1NDQ@._V1_UY268_CR43,0,182,268_AL_.jpg",
        "retrieved": "2017-07-16T20:21:29.427Z"
    }]
}
```

### title - get a single title

#### Request

```
GET /title?id=tt0182576
```

* ```id``` - *Required.* The ID, in tt\* format, of the title to find.

#### Response

```
{
    "success": true,
    "result": {
        "title": "Family Guy",
        "plot": "In a wacky Rhode Island town, a dysfunctional family strive to cope with everyday life as they are thrown from one crazy scenario to another.",
        "runtime": "22min",
        "rating": "8.2",
        "votes": "254,299",
        "genres": ["Animation", "Comedy"],
        "photoUrl": "https://images-na.ssl-images-amazon.com/images/M/MV5BNGRkMTllZTUtZTQyYi00NjVlLTlhZjEtODExNjQ4YjQ1Y2RjXkEyXkFqcGdeQXVyNTA4NzY1MzY@._V1_UY268_CR0,0,182,268_AL_.jpg",
        "retrieved": "2017-07-16T20:11:30.545Z"
    }
}
```

## Running the API

This API is written in TypeScript and the files in ```build/``` are auto-generated by ```tsc -w```. Run ```npm start``` to start ```build/index.js```.

To enable debug output on errors, set the ```DEBUG``` environment variable.

To use Redis for caching, set the ```REDIS_URL``` environment variable to one parsable by the NodeJS redis library.